{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Work Notifications",
    "description": "This API method returns a collection of open notifications and their essential attributes.",
    "termsOfService": "http://starbucks.com/terms/",
    "contact": {
      "name": "Starbucks API Team",
      "email": "foo@starbucks.com",
      "url": "http://starbucks.com"
    },
    "license": {
      "name": "Starbucks License",
      "url": "http://starbucks.com/license"
    }
  },
  "host": "soa-prod.starbucks.com",
  "basePath": "/workNotifications",
  "schemes": [
    "https"
  ],
  "paths": {
    "/{region}/{function}": {
      "get": {
        "description": "This API method returns a collection of open notifications and their essential attributes.",
        "consumes": [
          "application/xml"
        ],
        "produces": [
          "application/xml"
        ],
        "parameters": [
          {
            "name": "Date",
            "in": "header",
            "description": "The timestamp of the request, required to construct the signature",
            "required": true,
            "type": "string",
            "format": "date"
          },
          {
            "name": "Digest",
            "in": "header",
            "description": "The checksum of the message body of the request calculated using the SHA-256 algorithm and required to construct the signature",
            "required": true,
            "type": "string"
          },
          {
            "name": "Accept",
            "in": "header",
            "description": "Header for specifying response as XML",
            "required": false,
            "type": "string"
          },
          {
            "name": "Content-Type",
            "in": "header",
            "description": "Header for specifying request as XML",
            "required": false,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Header for specifying Signature along with the key Id, signing algorithm, headers list and signature",
            "required": true,
            "type": "string"
          },
          {
            "name": "gws-environment",
            "in": "header",
            "description": "The Id of the environment-specific instance of the API to be called",
            "required": true,
            "type": "string",
            "enum": ["prod", "ct", "pd", "pi", "ps" , "sd", "ss"]
          },
          {
            "name": "gws-version",
            "in": "header",
            "description": "The number representing the version of the request",
            "required": true,
            "type": "integer",
            "enum": [1]
          },
          {
            "name": "gws-requestId",
            "in": "header",
            "description": "Header required internally for uniquely identifying the request, used for audit purposes and end-to-end testing",
            "required": true,
            "type": "string"
          },
          {
            "name": "gws-audit",
            "in": "header",
            "description": "Header required internally for specifying the audit trail of callers.",
            "required": false,
            "type": "string"
          },
          {
            "name": "gws-tag-jwt-access-token",
            "in": "header",
            "description": "Header for passing the TAG-created JWT Access Token.",
            "required": true,
            "type": "string"
          },
          {
            "name": "region",
            "in": "path",
            "description": "Geographical Area.",
            "required": true,
            "type": "string",
            "enum": ["na", "emea"]
          },
          {
            "name": "function",
            "in": "path",
            "description": "Business area.",
            "required": true,
            "type": "string",
            "enum": ["sco"]
          },
          {
            "name": "type",
            "in": "query",
            "description": "Notification Type.",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": ["purchaseOrder", "payablesInvoice", "expense", "requisition"],
            "enum": ["purchaseOrder", "payablesInvoice", "expense", "requisition"]
          },
          {
            "name": "statusCode",
            "in": "query",
            "description": "Notification Status.",
            "required": false,
            "type": "string",
            "default": "open",
            "enum": ["cancelled", "closed", "open"]
          },
          {
            "name": "userId",
            "in": "query",
            "description": "Network Id for user. Default userId extracted from JWT.",
            "required": false,
            "type": "string",
            "enum": ["cancelled", "closed", "open"]
          },
          {
            "name": "actionableInd",
            "in": "query",
            "description": "actionable / non actionable Notifications.",
            "required": false,
            "type": "boolean",
            "default": true
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Number of return results.",
            "required": false,
            "type": "integer",
            "default": 100
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Return results beginning from this offset.",
            "required": false,
            "type": "integer",
            "default": 0
          }
        ],
        "responses": {
          "200": {
            "description": "Response",
            "headers": {
              "Content-Type": {
                "description": "Header that provides the content type of the response",
                "type": "string",
                "enum": ["application/xml"]
              }
            },
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "type": "object",
                  "properties": {
                    "paging": {
                      "description": "Paging results for the returned response.",
                      "type": "object",
                      "properties": {
                        "total": {
                          "description": "Total number of results based on search query.",
                          "type": "integer"
                        },
                        "offset": {
                          "description": "Returned results based on offset from beginning of set.",
                          "type": "integer"
                        },
                        "limit": {
                          "description": "Maximum set number of results allowed per page.",
                          "type": "integer"
                        },
                        "returned": {
                          "description": "Number of results returned on current page.",
                          "type": "integer"
                        }
                      }
                    },
                    "workNotifications": {
                      "description": "A collection of workflow requests that match the search criteria.",
                      "type": "array",
                      "items": {
                        "description": "Information about an instance of an workflow request/notification.",
                        "type": "object",
                        "properties": {
                          "workNotificationId": {
                            "description": "Unique Identifier of a workflow request /notification within the Function and Region.",
                            "type": "string"
                          },
                          "actionableInd": {
                            "description": "This indicates if this notification is actionable . Any FYI notification is not actionable . If approval notification is complete or closed it is not actionable . Open approval notification is actionable.",
                            "type": "string"
                          },
                          "requestor": {
                            "type": "object",
                            "properties": {
                              "userId": {
                                "description": "Notification Sender's ID (Starbucks network Id)",
                                "type": "string"
                              },
                              "name": {
                                "description": "Notification Sender's full name",
                                "type": "string"
                              }
                            }
                          },
                          "type": {
                            "description": "Business Document type.",
                            "type": "string",
                            "enum": ["purchaseOrder", "payablesInvoice", "expense", "requisition"]
                          },
                          "statusCode": {
                            "description": "Notification Status.",
                            "type": "string",
                            "enum": ["cancelled", "closed", "open"]
                          },
                          "description": {
                            "description": "Notification Summary . This usually will have key information about the notification like Business Entity, requested action, Document Number and amount etc.",
                            "type": "string"
                          },
                          "createdDate": {
                            "description": "Notification Creation Date and Time (ISO format#YYYY-MM-DDThh:mm:ssTZD (eg 1997-07-16T18:20:30+01:00)).",
                            "type": "string",
                            "format": "time"
                          },
                          "dueDate": {
                            "description": "Due date and Time (ISO format#YYYY-MM-DDThh:mm:ssTZD (eg 1997-07-16T18:20:30+01:00)) before notification gets expire.",
                            "type": "string",
                            "format": "time"
                          },
                          "action": {
                            "description": "This group is optional. For Open notification this will not show up as this gets populated at approval action.",
                            "type": "object",
                            "properties": {
                              "code": {
                                "description": "This is the last action taken on this notification.",
                                "type": "string",
                                "enum": ["approved", "rejected" ,"reverted"]

                              },
                              "comment": {
                                "description": "Text that user put with the last action. In case of approval this will be approval comment.",
                                "type": "string"
                              },
                              "date": {
                                "description": "Date and time (ISO format#YYYY-MM-DDThh:mm:ssTZD (eg 1997-07-16T18:20:30+01:00))) of action.",
                                "type": "string",
                                "format": "time"
                              },
                              "who": {
                                "description": "network Id for the person that took last action on this Notification.",
                                "type": "string"
                              }
                            }
                          },
                          "notificationDetails": {
                            "description": "Collection of details about Document attributes.",
                            "type": "array",
                            "items": {
                              "description": "An instance of an request Details about Document attributes.",
                              "type": "object",
                              "properties": {
                                "code": {
                                  "description": "Attribute Code.",
                                  "type": "string",
                                  "enum": ["DOCUMENT_NUMBER", "PREPARER_DISPLAY_NAME", "FORWARD_FROM_DISPLAY_NAME", "FUNCTIONAL_CURRENCY", "PO_AMOUNT_DSP", "TAX_AMOUNT_DSP", "TOTAL_AMOUNT_DSP", "DOCUMENT_TYPE_DISP", "OPERATING_UNIT_NAME", "SUPPLIER", "SUPPLIER_SITE"]
                                },
                                "name": {
                                  "description": "Attribute Name.",
                                  "type": "string"
                                },
                                "value": {
                                  "description": "Value for the attributes.",
                                  "type": "string"
                                }
                              },
                              "xml": {
                                "name": "notificationDetail"
                              }
                            },
                            "xml": {
                              "name": "notificationDetails"
                            }
                          }
                        },
                        "xml": {
                          "name": "workNotification"
                        }
                      },
                      "xml": {
                        "name": "workNotifications"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "application/xml": "<result>\n              <paging>\n              <total>245</total>\n              <offset>0</offset>\n              <limit>10</limit>\n              <returned>2</returned>\n              </paging>\n              </workNotifications>\n              <workNotification>\n              <workNotificationId>911123</workNotificationId>\n              <actionableInd>true</actionable>\n              <requestor>\n              <userId>JGARDNER</userId>\n              <name>GARDNER,JONATHAN</code>\n              </requestor>\n              <type>purchaseOrder</type>\n              <statusCode>open</statusCode>\n              <description>STARBUCKS MFG US - Standard Purchase Order 70007067,0 for USD 10,120.00 requires your approval.</description>\n              <createdDate>2016-13-06T08:15:30-05:00</createdDate>\n              <dueDate>2016-14-06T08:15:30-05:00</dueDate>\n              <notificationDetails>\n              <notificationDetail>\n              <code>documentNumber</code>\n              <name>PO Document Number</name>\n              <value>70007061</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>preparerName</code>\n              <name>Preparer Display code</name>\n              <value>MORGAN, MICHAEL</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>forwardFromname</code>\n              <name>Forward From Display code</name>\n              <value>GARDNER, JONATHAN</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>poAmountDsp</code>\n              <name>PO Amount Display</name>\n              <value>20109.599999999999</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>functionalCurrency</code>\n              <name>Functional Currency</name>\n              <value>USD</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>documentTypeDisp</code>\n              <name>Document Type Display</name>\n              <value>Standard Purchase Order</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>requiresApprovalMsg</code>\n              <name>Requires Approval Translated Message</name>\n              <value>requires your approval.</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>totalAmountDsp</code>\n              <name>Total Amount Display</name>\n              <value>20109.599999999999</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>taxAmountDsp</code>\n              <name>Tax Amount Display</name>\n              <value>0</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>#fromRole</code>\n              <name>From Role</name>\n              <value>JGARDNER</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>operatingUnitcode</code>\n              <name>Operating Unit code</name>\n              <value>STARBUCKS MFG US</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>supplier</code>\n              <name>Supplier</name>\n              <value>FRESCO SYSTEM USA INCORPORATED</value>\n              </notificationDetail>\n              <notificationDetail>\n              <code>supplieSite</code>\n              <name>Supplier Site</name>\n              <value>REDOAK01</value>\n              </notificationDetail>\n              </notificationDetails>\n              </workNotification>\n              </workNotifications>\n              </result>"
            }
          },
          "default": {
            "description": "Response Body in the event of an error",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              }
            },
            "examples": {
              "application/xml": "<error>\n              <code>9031004</code>\n              <message>Work Notification not found.</message>\n              </error>"
            }
          }
        }
      }
    }
  }
}